for i, v in pairs(game:GetService("ReplicatedStorage")._NETWORK:GetChildren()) do
    if v.Name:find("{") then
        local args = {
            [1] = "Boxer"
        }

        if v:IsA("RemoteEvent") then
            v:FireServer(unpack(args))
        elseif v:IsA("RemoteFunction") then
            local result = v:InvokeServer(unpack(args))
            print("Result from InvokeServer:", result)
        else
            print("v is neither a RemoteEvent nor a RemoteFunction.")
        end
    end
end

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")

animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=16163355836"
game.Players.LocalPlayer.Character.Animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=13548464604"

game.Players.LocalPlayer.Character.Animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=16102806530"

game.Players.LocalPlayer.Character.Animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=16102806530"

local humanoid = character:WaitForChild("Humanoid")
humanoid.WalkSpeed = 10

local player = game.Players.LocalPlayer -- Adjust if using a different context
local character = player.Character or player.CharacterAdded:Wait()
local targetPosition = Vector3.new(-0.8605901598930359, 0.5086292624473572, -0.026090234518051147)

local ModelEffect = game:GetObjects("rbxassetid://14949130713")[1]
if ModelEffect then
    for i,v in pairs(ModelEffect.HumanoidRootPart:GetChildren()) do
        if v.ClassName == "ParticleEmitter" then
            for i,p in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                if p:IsA("Part") then
                    v:Clone().Parent = p
                end
            end
        end
    end
    ModelEffect:Destroy()
end

local ModelDeath = game:GetObjects("rbxassetid://12195574482")[1]
if ModelDeath then
    for i,a in pairs(ModelDeath.Torso:GetDescendants()) do
        if a.Name == "Attachment4" or a.Name == "Flare" or a.Name == "Star3" or a.Name == "Bits" then
            a:Destroy() 
        end
    end
    for i,a in pairs(ModelDeath.Torso:GetChildren()) do
        if a.ClassName == "Attachment" and a:FindFirstChildWhichIsA("ParticleEmitter") then
            a:Clone().Parent = game.Players.LocalPlayer.Character.Torso
        end
    end
    ModelDeath:Destroy()
end

local character = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()

for _, part in pairs(character:GetChildren()) do
    if part:IsA("MeshPart") or part:IsA("Part") then
        part.BrickColor = BrickColor.new("Black")
    end
end

local player = game.Players.LocalPlayer

local function removeClothes(character)
    local shirt = character:FindFirstChildOfClass("Shirt")
    local pants = character:FindFirstChildOfClass("Pants")

    if shirt then
        shirt:Destroy() -- Remove the shirt
    end

    if pants then
        pants:Destroy() -- Remove the pants
    end
end

-- Connect to the CharacterAdded event to ensure the character is loaded
player.CharacterAdded:Connect(removeClothes)

-- If the character is already loaded, call the function immediately
if player.Character then
    removeClothes(player.Character)
end

character:SetPrimaryPartCFrame(CFrame.new(targetPosition))

local animator = humanoid:FindFirstChildOfClass("Animator") or Instance.new("Animator")
    animator.Parent = humanoid

    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://13675136513"
    local animationTrack = animator:LoadAnimation(animation)
    animationTrack:Play()
    animationTrack:AdjustSpeed(0.5)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local screenGui = Instance.new("ScreenGui", PlayerGui)

local screamButton = Instance.new("TextButton")
screamButton.Size = UDim2.new(0, 150, 0, 70)
screamButton.Position = UDim2.new(0, 10, 0, 100)
screamButton.Text = "SCREAM"
screamButton.TextSize = 24
screamButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
screamButton.TextColor3 = Color3.fromRGB(255, 255, 255)
screamButton.Parent = screenGui

local isCooldown = false

local function useScream()
    if isCooldown then return end
    isCooldown = true

    local originalWalkSpeed = humanoid.WalkSpeed
    humanoid.WalkSpeed = 0

    local message = "AHHHHHHHHH"
    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")

    local args = {
        [1] = "Ban Hammer"
    }
    game:GetService("ReplicatedStorage").RetroAbility:FireServer(unpack(args))

    local animator = humanoid:FindFirstChildOfClass("Animator") or Instance.new("Animator")
    animator.Parent = humanoid

    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://13538759700"
    local animationTrack = animator:LoadAnimation(animation)
    animationTrack:Play()
    animationTrack:AdjustSpeed(1.8)

    animationTrack.Stopped:Connect(function()
        humanoid.WalkSpeed = originalWalkSpeed
        wait(5)
        isCooldown = false
    end)
end

screamButton.MouseButton1Click:Connect(function()
    useScream()
end)

UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then return end
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == Enum.KeyCode.E then
            useScream()
        end
    end
end)

local knockbackButton = Instance.new("TextButton")
knockbackButton.Size = UDim2.new(0, 150, 0, 70)
knockbackButton.Position = UDim2.new(0, 10, 0, 10)
knockbackButton.Text = "BOOST"
knockbackButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
knockbackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
knockbackButton.TextScaled = true
knockbackButton.Parent = screenGui

knockbackButton.MouseButton1Click:Connect(function()
    local camera = workspace.CurrentCamera
    local cameraDirection = camera.CFrame.LookVector
    local upwardForce = Vector3.new(0, 1, 0)
    local knockbackDirection = (cameraDirection + upwardForce).Unit

    local args = {
        [1] = {
            ["Direction"] = knockbackDirection,
            ["Force"] = 90
        }
    }
    game:GetService("ReplicatedStorage").SelfKnockback:FireServer(unpack(args))
end)

local bombButton = Instance.new("TextButton")
bombButton.Size = UDim2.new(0, 150, 0, 70)
bombButton.Position = UDim2.new(1, -160, 0, 50)
bombButton.Text = "BLAST OFF"
bombButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
bombButton.TextColor3 = Color3.fromRGB(255, 255, 255)
bombButton.TextScaled = true
bombButton.Parent = screenGui

local function useBomb()
    local args = {
        [1] = "Bomb"
    }
    game:GetService("ReplicatedStorage").RetroAbility:FireServer(unpack(args))
end

bombButton.MouseButton1Click:Connect(function()
    useBomb()
end)

-- Punch ability
local punchButton = Instance.new("TextButton", screenGui)
punchButton.Size = UDim2.new(0, 150, 0, 70) -- Increased size of the button
punchButton.Position = UDim2.new(1, -160, 0.5, -25) -- Moved down further (increased Y-coordinate)
punchButton.Text = "PUNCH"
punchButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Black background
punchButton.TextColor3 = Color3.fromRGB(255, 255, 255)
punchButton.TextSize = 24 -- Increased text size for better visibility

local cooldown = false
local punchDistance = 20 -- Distance to check for nearby players

local function hitNearbyPlayers(range)
    for _, target in pairs(Players:GetPlayers()) do
        if target ~= player and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - target.Character.HumanoidRootPart.Position).Magnitude
            if distance <= range then
                local args = {
                    [1] = target,
                    [2] = true
                }
                game:GetService("ReplicatedStorage").Events.Boxing:FireServer(unpack(args))

            end
        end
    end
end

punchButton.MouseButton1Click:Connect(function()
    if not cooldown and humanoid then
        cooldown = true

        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://109511274923523" -- Replace with your animation ID
        local animator = humanoid:FindFirstChildOfClass("Animator") or Instance.new("Animator", humanoid)
        local animationTrack = animator:LoadAnimation(animation)

        animationTrack:Play()
        animationTrack:AdjustSpeed(1.2)

        hitNearbyPlayers(punchDistance)

        wait(1) -- Adjust cooldown time as needed
        cooldown = false
    end
end)

-- Create the ScreenGui
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PunchGui"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Create the TextButton
local button = Instance.new("TextButton")
button.Name = "PunchButton"
button.Size = UDim2.new(0, 150, 0, 70)  -- Width, Height
button.Position = UDim2.new(0, 10, 0, 180)  -- Positioned on the left side
button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- Black background
button.TextColor3 = Color3.fromRGB(255, 255, 255)  -- White text
button.TextSize = 24  -- Size of the text
button.Text = "SCYTHE"  -- Set button text to "SCYTHE"
button.Parent = screenGui  -- Set the parent of the button to the ScreenGui

local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
local buttonPressed = false  -- Track if the button has been pressed

local function onButtonClicked()
    if not buttonPressed and humanoid then
        buttonPressed = true  -- Set the button as pressed
        humanoid.WalkSpeed = 0  -- Set walk speed to 0
        
        local animator = humanoid:FindFirstChildOfClass("Animator") or Instance.new("Animator")
        animator.Parent = humanoid

        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://16144838323"  -- Your animation ID
        local animationTrack = animator:LoadAnimation(animation)
        animationTrack:Play()
        animationTrack:AdjustSpeed(1.2)  -- Adjust speed if needed

        while humanoid.Health > 0 do
            for _, target in pairs(Players:GetPlayers()) do
                if target ~= player and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                    local args = {
                        [1] = "ScytheWeapon"
                    }
                    -- Disable sound by not triggering any sound events
                    game:GetService("ReplicatedStorage").Scythe:FireServer(unpack(args))
                end
            end
            wait(0.4) -- Loop immediately without lag
        end

        wait(2) -- Wait for 4 seconds before restoring walk speed
        humanoid.WalkSpeed = 10  -- Restore walk speed
        buttonPressed = false  -- Reset button pressed state after completion
    end
end

button.MouseButton1Click:Connect(onButtonClicked)  -- Connect the button click to the function

-- Reset button functionality when the player dies
player.CharacterAdded:Connect(function(newCharacter)
    buttonPressed = false  -- Reset the button pressed state
    humanoid = newCharacter:WaitForChild("Humanoid")  -- Update humanoid reference
end)

-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SprintGui"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create a TextButton
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 150, 0, 75) -- Adjusted size for mobile
button.Position = UDim2.new(1, -160, 0.5, -105) -- Adjusted position slightly upward
button.Text = "SPRINT"
button.TextSize = 36 -- Reduced text size for better fit
button.BackgroundColor3 = Color3.new(0, 0, 0) -- Background color (black)
button.TextColor3 = Color3.new(1, 1, 1) -- Text color (white)
button.Parent = screenGui

-- Get the player's character and humanoid
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Create the Animator if it doesn't exist
local animator = humanoid:FindFirstChildOfClass("Animator") or Instance.new("Animator")
animator.Parent = humanoid

-- Create the Animation
local animation = Instance.new("Animation")
animation.AnimationId = "rbxassetid://15775758181"
local animationTrack = animator:LoadAnimation(animation)

-- Sprint toggle variable
local isSprinting = false

-- Button click event
button.MouseButton1Click:Connect(function()
    if not isSprinting then
        -- Activate sprinting
        animationTrack:Play()
        animationTrack:AdjustSpeed(2.4)
        humanoid.WalkSpeed = 45 -- Set walk speed to sprint speed
        button.Text = "STOP" -- Change button text
        isSprinting = true
    else
        -- Deactivate sprinting
        animationTrack:Stop()
        humanoid.WalkSpeed = 10 -- Set walk speed to normal
        button.Text = "SPRINT" -- Reset button text
        isSprinting = false
    end
end)
